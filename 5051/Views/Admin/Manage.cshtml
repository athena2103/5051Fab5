@model _5051.Models.StudentViewModel

@{
    ViewBag.Title = "Reports";
}

<head>
  
</head>
<body background="~/Content/img/adminBackground.png">

    <div class="container">
        <!--script to switch between report and edit attendance table-->
        <script>
            function changeImage() {
                 var img = document.getElementById("report");
                 img.src = "@Url.Content("~/Content/img/defaultEditAttendance.png")";
                 img.style.height = "200px";
                 img.style.width = "800px";
                 return false;
            }
        </script>

       

        <div class="col-md-8">
            <h3>Reports</h3>
        </div>

        <div class="col-md-4">
            @{
                if (Model.Student!= null)
                {
                    @Html.ActionLink("Manage student info", "Read", "Student",
                    new { id = Model.Student.Id }, new { @class = "btn btn-primary" })
                    <a href="#" class="btn btn-primary" role="button" onclick="changeImage();">Edit attendance</a>
                }
            }


        </div>
        <br />

        <div class="container">
            <div class="row text-center">
                <div class="col-sm-12">
                    @{
                        if ((Model.StudentList == null || Model.StudentList.Count == 0) && Model.Student == null)
                        {
                            <br />
                            <p>No Students in the System</p>
                            <br />
                        }
                        else
                        {
                            <div class="col-md-4">
                                <br /><br />
                                @{
                                    if (Model.Student != null)
                                        //For invidiual student
                                    {
                                        var item = Model.Student;
                                        <div class="row">
                                            <div class="col-sm-5">
                                                <img src="~/Content/img/@item.AvatarUri" width="150" height="150" />
                                                <br />
                                                <br />
                                                <br />

                                            </div>
                                        </div>
                                        if (Model.Student.isUpdate == true)
                                        {
                                            //Update student info
                                            using (Html.BeginForm("Update","Admin",FormMethod.Post))
                                            {
                                                @Html.AntiForgeryToken()
                                                @Html.HiddenFor(i => Model.Student.Id)
                                                @Html.HiddenFor(i => Model.Student.AvatarId)
                                                @Html.HiddenFor(i => Model.Student.AvatarLevel)
                                                @Html.HiddenFor(i => Model.Student.Tokens)
                                                @Html.HiddenFor(i => Model.Student.isUpdate)
                                                @Html.HiddenFor(i => Model.Student.AvatarUri)
                                                <div class="row">
                                                    <div class="col-sm-5 text-left">
                                                        @Html.DisplayNameFor(i => Model.Student.Name)
                                                    </div>
                                                    <div class="col-sm-7 text-left">
                                                        @Html.EditorFor(i => Model.Student.Name)
                                                        @Html.ValidationMessageFor(i => Model.Student.Name)
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-5 text-left">
                                                        @Html.DisplayNameFor(i => Model.Student.AvatarName)
                                                    </div>
                                                    <div class="col-sm-7 text-left">
                                                        @Html.DisplayFor(i => Model.Student.AvatarName)
                                                    </div>
                                                </div>


                                                <div class="row">
                                                    <div class="col-sm-5 text-left">
                                                        @Html.DisplayNameFor(i => Model.Student.AvatarDescription)
                                                    </div>
                                                    <div class="col-sm-7 text-left">
                                                        @Html.DisplayFor(i => Model.Student.AvatarDescription)
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-5 text-left">
                                                        @Html.DisplayNameFor(i => Model.Student.AvatarLevel)
                                                    </div>
                                                    <div class="col-sm-7 text-left">
                                                        @Html.DisplayFor(i => Model.Student.AvatarLevel)
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-5 text-left">
                                                        @Html.DisplayNameFor(i => Model.Student.Status)
                                                    </div>
                                                    <div class="col-sm-7 text-left">
                                                        @Html.EnumDropDownListFor(i => Model.Student.Status, "Select Status")
                                                        @Html.ValidationMessageFor(i => Model.Student.Status)
                                                    </div>
                                                </div>

                                                <br />
                                                <br />
                                                <div class="row">
                                                    <div class="col-sm-8">
                                                            @Html.ActionLink("Cancel", "Manage", "Admin", new { @class = "btn btn-success" })
                                                            <input type="submit" value="Update" class="btn btn-primary">
                                                            
                                                    </div>
                                                </div>


                                            }
                                        }
                                        else
                                        {
                                            //Read student info
                                                    <div class="row">
                                                        <div class="col-sm-5 text-left">
                                                            @Html.DisplayNameFor(i => item.Name)
                                                        </div>
                                                        <div class="col-sm-7 text-left">
                                                            @Html.DisplayFor(i => item.Name)
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-5 text-left">
                                                            @Html.DisplayNameFor(i => item.AvatarName)
                                                        </div>
                                                        <div class="col-sm-7 text-left">
                                                            @Html.DisplayFor(i => item.AvatarName)
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-5 text-left">
                                                            @Html.DisplayNameFor(i => item.AvatarDescription)
                                                        </div>
                                                        <div class="col-sm-7 text-left">
                                                            @Html.DisplayFor(i => item.AvatarDescription)
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-5 text-left">
                                                            @Html.DisplayNameFor(i => item.AvatarLevel)
                                                        </div>
                                                        <div class="col-sm-7 text-left">
                                                            @Html.DisplayFor(i => item.AvatarLevel)
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-5 text-left">
                                                            @Html.DisplayNameFor(i => item.Status)
                                                        </div>
                                                        <div class="col-sm-7 text-left">
                                                            @Html.DisplayFor(i => item.Status)
                                                        </div>
                                                    </div>

                                                    <br />
                                                        <br />
                                                        <div class="row">
                                                            <div class="col-sm-8">
                                                                    @Html.ActionLink("Edit", "Manage", "Admin", new { id = item.Id, cmd = "Update" }, new { @class = "btn btn-primary" })
                                                                    @Html.ActionLink("Back", "Manage", "Admin", new { id = ""}, new { @class = "btn btn-success" })
                                                            </div>
                                                        </div>

                                        }

                                    }
                                    else
                                    {
                                        //For list of students
                                        foreach (var item in Model.StudentList)
                                        {
                                            <div class="col-md-6 text-center">
                                                <a id="@item.Id" href="~/Admin/Manage/@item.Id">
                                                    <img src="~/Content/img/@item.AvatarUri" width="50" height="50" />
                                                    <br />
                                                    <span>
                                                        @item.Name
                                                    </span>
                                                </a>
                                            </div>

                                        }
                                    }
                                }
                            </div>
                            <div class="col-md-8">
                                <span class="pull-left">
                                    <label for="frDate">From date:</label>
                                    <input type="date" id="frInput" name="frInput">
                                    <label for="toDate">To date:</label>
                                    <input type="date" id="toInput" name="toInput">
                                </span>
                                <br\>
                                    <span class="pull-left">
                                        @if (Model.Student == null)
                                        {
                                            <img id="report" src="~/Content/img/Admin Reports/totalAttendance.PNG" width="600" height="300">
                                        }
                                        else
                                        {
                                            <!--Script to move between individual reports-->
                                            <script type="text/javascript">
                                                    function changeReport(id) {
                                                        var counter = document.getElementById("counter").innerHTML;

                                                        if (id == "next") {
                                                            if (counter >= 4) {
                                                                counter = 4;
                                                            } else {
                                                                counter++;
                                                            }
                                                         } else {
                                                            if (counter <= 1) {
                                                                counter = 1;
                                                            } else {
                                                                counter--;
                                                            }
                                                        }
                                                        var img = document.getElementById("report");
                                                        var newimg = '@Model.Student.ReportsId[0]';
                                                        newimg = newimg.replace("_1", "_" + counter);
                                                        img.src = "@Url.Content("~/Content/img/Admin Reports/")" + newimg;
                                                        document.getElementById("counter").innerHTML = counter;

                                                    }
                                            </script>

                                            var reportSource = Model.Student.ReportsId[0];
                                            <img id="report" src="~/Content/img/Admin Reports/@reportSource" width="600" height="300">
                                            <br/>
                                            <img id="back" src="~/Content/img/Admin Reports/backIcon.png" onclick="changeReport(this.id)" 
                                                     width="50" height="50">
                                            <img id="next" src="~/Content/img/Admin Reports/nextIcon.png" onclick="changeReport(this.id)"
                                                         width="50" height="50">
                                            <a id="counter" visibility: hidden>1</a>

                                        }

                                    </span>
                            </div>

                        }
                    }
                </div>
            </div>
        </div>

        

    </div>
</body>